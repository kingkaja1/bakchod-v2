# Firebase deploy notes

## "Error: An unexpected error has occurred" after deploy

This message often appears **after** a successful deploy. Your rules/hosting **were** deployed; the error is from the Firebase CLI (e.g. auth/session or opening the browser).

To clear it:

```bash
npx firebase login --reauth
```

Then run deploy again. You can ignore the error if the output shows `✔ Deploy complete!` and `✔ firestore: released rules...`.

## Deploy only Firestore rules

```bash
npm run deploy:rules
# or
npx firebase deploy --only firestore:rules
```

## Clear chat / delete message permission denied

If you still get permission denied when clearing chat or deleting messages:

1. Redeploy rules: `npm run deploy:rules`
2. Sign out and sign back in (so the auth token is fresh)
3. Wait a few seconds after opening a chat before using Clear chat
